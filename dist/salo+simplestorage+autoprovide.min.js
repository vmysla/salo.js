function w(){function d(){window.localStorage.setItem("__simpleStorageInitTest","tmpval");window.localStorage.removeItem("__simpleStorageInitTest");u();p();"addEventListener"in window?window.addEventListener("storage",g,!1):document.attachEvent("onstorage",g);"addEventListener"in window&&window.addEventListener("pageshow",function(a){a.persisted&&g()},!1);l=!0}function g(){try{u()}catch(a){l=!1;return}p()}function u(){var b=localStorage.getItem("simpleStorage");try{a=JSON.parse(b)||{}}catch(c){a=
{}}r=t()}function m(){try{localStorage.setItem("simpleStorage",JSON.stringify(a)),r=t()}catch(b){return b}return!0}function t(){var a=localStorage.getItem("simpleStorage");return a?String(a).length:0}function p(){var b,c,h,f,e,d=Infinity,g=0;clearTimeout(k);if(a&&a.a&&a.a.b){b=+new Date;e=a.a.b.keys||[];f=a.a.b.c||{};c=0;for(h=e.length;c<h;c++)if(f[e[c]]<=b)g++,delete a[e[c]],delete f[e[c]];else{f[e[c]]<d&&(d=f[e[c]]);break}Infinity!=d&&(k=setTimeout(p,Math.min(d-b,2147483647)));g&&(e.splice(0,g),
v(),m())}}function q(b,c){var h=+new Date,f,e,d=!1;c=Number(c)||0;if(0!==c)if(a.hasOwnProperty(b)){a.a||(a.a={});a.a.b||(a.a.b={c:{},keys:[]});a.a.b.c[b]=h+c;if(a.a.b.c.hasOwnProperty(b))for(f=0,e=a.a.b.keys.length;f<e;f++)a.a.b.keys[f]==b&&a.a.b.keys.splice(f);f=0;for(e=a.a.b.keys.length;f<e;f++)if(a.a.b.c[a.a.b.keys[f]]>h+c){a.a.b.keys.splice(f,0,b);d=!0;break}d||a.a.b.keys.push(b)}else return;else if(a&&a.a&&a.a.b){if(a.a.b.c.hasOwnProperty(b))for(delete a.a.b.c[b],f=0,e=a.a.b.keys.length;f<e;f++)if(a.a.b.keys[f]==
b){a.a.b.keys.splice(f,1);break}v()}clearTimeout(k);a&&a.a&&a.a.b&&a.a.b.keys.length&&(k=setTimeout(p,Math.min(Math.max(a.a.b.c[a.a.b.keys[0]]-h,0),2147483647)))}function v(){var b=!1,c;if(a&&a.a){a.a.b&&!a.a.b.keys.length&&delete a.a.b;for(c in a.a)if(a.a.hasOwnProperty(c)){b=!0;break}b||delete a.a}}var a=!1,r=0,l=!1,k=null;try{d()}catch(n){}return{version:"0.1.3",j:function(){return!!l},set:function(b,c,d){if("__simpleStorage_meta"==b||!a)return!1;if("undefined"==typeof c)return this.f(b);d=d||
{};try{c=JSON.parse(JSON.stringify(c))}catch(f){return f}a[b]=c;q(b,d.b||0);return m()},get:function(b){if(!a)return!1;if(a.hasOwnProperty(b)&&"__simpleStorage_meta"!=b&&this.h(b))return a[b]},f:function(b){return a?b in a?(delete a[b],q(b,0),m()):!1:!1},l:function(b,c){if(!a)return!1;q(b,c);return m()},h:function(b){return a?a.hasOwnProperty(b)?a.a&&a.a.b&&a.a.b.c&&a.a.b.c.hasOwnProperty(b)?(b=Math.max(a.a.b.c[b]-+new Date||0,0))||!1:Infinity:!1:!1},flush:function(){if(!a)return!1;a={};try{return localStorage.removeItem("simpleStorage"),
!0}catch(b){return b}},index:function(){if(!a)return!1;var b=[],c;for(c in a)a.hasOwnProperty(c)&&"__simpleStorage_meta"!=c&&b.push(c);return b},m:function(){return r}}}"function"===typeof define&&define.i?define(w):"undefined"!==typeof exports?module.g=w():w();
function y(d,g){function u(){}function m(){n=k=0;d.set("buildHitTask",B);d.set("sendHitTask",x)}function t(a){d.set("buildHitTask",e);d.set("sendHitTask",x);a&&d.send("exception",{exDescription:"[salo.js] "+a.message,nonInteraction:!0,exFatal:!1})}function p(a){for(var c,d=!1,z=l.length;!d&&z--;){c=l[z];var d=!0,e;for(e in c)a.get(e)!=c[e]&&(d=!1)}return d?(c="salo"+(new h.Date).getTime(),a=a.get("hitPayload"),f.set(c,a,{b:b})&&c):!1}function q(){if(!(0<n))for(var a=f.index(),b=0;b<a.length;){var c=
a[b++],e=c.match(/^salo(\d+)$/);if(e&&(e=c.match(/^salo(\d+)$/),e=parseInt(e[1],10),e=(new h.Date).getTime()-e,d.send({hitType:"salo",saloId:c,queueTime:e})))return!0}}function v(a){a+="lock";if(f.get(a))return!1;f.set(a,1,{b:c});return!0}function a(a){return function(b,c){try{a(b,c)}catch(f){t(f)}}}var r={enable:m,disable:t,watch:function(a){l.push(a)}},l=[{useSalo:!0,useBeacon:!1,hitCallback:void 0,transport:void 0}],k,n;g=g||{};var b=g.storageTimeout||108E5,c=g.transportTimeout||5E3,h=g.timing||
window,f=g.storage||window.simpleStorage,e=d.get("buildHitTask"),A=d.get("sendHitTask"),B=a(function(a){if("salo"!=a.get("hitType"))e(a);else{var b,c,d;if(b=/^salo(\d+)$/i.exec(a.get("saloId")))c=b[0],d=b[1],b=f.get(storageKey),d=(new h.Date).getTime()-d,a.set("hitPayload",b+"&qt="+d),x(a,c)}}),x=a(function(a,b){b||(b=p(a),k++);if(!b||!n&&v(b)){var d=h.setTimeout(function(){g||(d=h.setTimeout(q,c),g=!0,n--)},c),e=a.get("hitCallback")||u,g=!1;a.set("hitCallback",function(){d&&h.clearTimeout(d);if(b){var a=
b;f.f(a);f.f(a+"lock")}g||(g=!0,n--);if(e){try{e()}catch(c){}e=void 0}q()},!0);k--;n++;A(a)}});m();return r}"undefined"!==typeof exports&&(module.g=y);window[window.GoogleAnalyticsObject]("require","salo");window[window.GoogleAnalyticsObject]("provide","salo",y);